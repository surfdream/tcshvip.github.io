define(function(require,exports,module){require("../css/style.css#");require("../../../view/public/wm_btn/css/style.css#");var e=require("http://s.tcsh.me/tcsh/model/lib/jquery/seajs-jquery-1.8.3.min.js"),d=require("http://s.tcsh.me/tcsh/model/lib/juicer/seajs-juicer-min.js");var c=e.browser.msie&&e.browser.version==="6.0";var i=false;var a=function(){if(c){i=true;var m=e(window),l=e("body"),j=l[0],k=m.height();m.on("scroll.fixed",function(){var o=e(this),n=Math.random()*99999;o.data("t",n);(function(p){setTimeout(function(){if(p==o.data("t")){var q=e("body > .fixed_box:visible");if(q.length){var r=j.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0;var s=k/2-q.outerHeight()/2;q.css("margin-top",0);q.animate({top:r+s})}}},500)})(n)})}};var f=function(){var l,k,j=this;this.create=function(p,q){var m=p._opacity||"0.5";var n='<div class="wmBox-mask"style="display:block; top: 0; bottom: 0; left: 0; right: 0; z-index: 1000; background-color: #000; filter: alpha(opacity='+m*100+"); opacity:"+m+"; position: fixed;  _position: absolute;zoom: 1;_height:"+e("body").height()+'"><iframe class="sdialog-mask-iframe" style="display: none; _display: block; width: 100%; height: 100%; filter: alpha(opacity=0); opacity: 0;" frameborder="0" src="javascript:\'\';"></iframe></div>';var o=this;var s=e("body");var r=e(".wmBox").length+10001;o.zIndex=r;l=e(this._html.render(p));s.append(l);k=e(n);k.click(function(t){t.preventDefault();t.stopPropagation()});k.mousemove(function(t){t.preventDefault();t.stopPropagation()});l.css("z-index",r+1);k.css("z-index",r);o.mask=k;typeof q==="function"&&q(l,k);p.mask&&s.append(k);l.on("click",".sure,.close",function(t){o.close();t.preventDefault()});l.on("click",".hide",function(t){o.hide();t.preventDefault()});l.on("click",".sure",function(t){if(typeof p.sureCallBack==="function"){p.sureCallBack()}t.preventDefault()});l.on("click",".wm_btn_item",function(t){var v=e(this),u=v.attr("dataindex");if(p.btns&&typeof p.btns[u].callback==="function"){p.btns[u].callback.call(o,v)}t.preventDefault()});l.css({paddingBottom:l.find(".wmBox-botton").outerHeight()+10});l.on("click.stopPropagation",function(t){t.stopPropagation()});l.mousemove(function(t){t.stopPropagation()});return l};this.show=function(){};this.hide=function(){l.fadeOut();k.fadeOut()};this.close=function(){l.fadeOut(function(){e(this).remove()});k.fadeOut(function(){e(this).remove()})};this.position=function(){};this.setCon=function(m){l.find(".wmBox-content").empty().append(m);return j}};var g=function(l,o){var k=this,j,n,m;this._html=d(['<div class="wmBox ${boxCls} fixed_box" id="${boxId}">','<div class="wmBox-head">','<h3 class="wmBox-title">${titleText}</h3>','<a class="close" href="javascript:void(0);">&times;</a>',"</div>",'<div class="wmBox-content"></div>','<div class="wmBox-botton">',"{@each btns as btnsitem,i}",'<a class="wm_btn_item ui_btn ${btnsitem.cls} ${btnsitem.res}" href="#" dataindex="${i}"><span class="ui_btn_txt">${btnsitem.text}</span></a>',"{@/each}","</div>","</div>"].join(""));j=e.extend({titleText:"系统提示",content:"",mask:true,btns:[{cls:"ui_btn_h23red6",res:"sure",text:"确定"}]},l);j.callback=l?l.callback||o:undefined;this.wmBox=n=this.create(j,function(q,p){q.find(".wmBox-content").append(j.content)});if(c){m={zoom:1,width:n.outerWidth()};n.find(".wmBox-head").css(m);n.find(".wmBox-botton").css(m)}this.position=function(){k.wmBox.css({marginTop:-(n.outerHeight()/2)+"px",marginLeft:-(n.outerWidth()/2)+"px"})};this.show=function(){k.wmBox.show();k.mask.css("display","block");k.position()};this.setTitle=function(p){k.wmBox.find(".wmBox-title").empty().append(p)};this.hide=function(){k.wmBox.fadeOut();k.mask.fadeOut()};typeof j.callback==="function"&&j.callback.call(this);this.wmBox.attr("top",this.wmBox.css("top"));!i&&a();i&&c&&e(window).scroll()};g.prototype=new f();var b=function(s,o){var r=this,q,p,n,m,k,l,j;if(!s.rely){throw"relyBox rely parameter is null or undefined"}this.rely=e(s.rely);k=e(window);l=k.scrollLeft();j=k.scrollTop();m=this.rely.offset();this._html=d(['<div class="wmBox wm_relyBox ${boxCls}" id="${boxId}">','<div class="wmBox-content"></div>','<div class="wmBox-botton">',"{@each btns as btnsitem,i}",'<a class="wm_btn_item ui_btn ${btnsitem.cls} ${btnsitem.res}" href="#" dataindex="${i}"><span class="ui_btn_txt">${btnsitem.text}</span></a>',"{@/each}","</div>","</div>"].join(""));this.show=function(){r.position();p.show()};q=e.extend({content:"",mask:false,offset:{top:0,left:0},btns:[{cls:"ui_btn_h22red10",res:"sure",text:"确定"},{cls:"ui_btn_h22gray6",res:"close",text:"取消"}]},s);q.callback=s?s.callback||o:undefined;this.wmBox=p=this.create(q,function(u,t){u.find(".wmBox-content").append(q.content)});if(c){n={zoom:1,width:p.outerWidth()};p.find(".wmBox-botton").css(n)}this.position=function(){l=k.scrollLeft();j=k.scrollTop();m=this.rely.offset();var t=m.left-(q.offset.left||0);if(t+p.outerWidth()>e("body").outerWidth()){t=m.left-p.outerWidth()+r.rely.outerWidth()}p.css({marginTop:"0px",marginLeft:"0px",top:m.top+r.rely.outerHeight()+5+(q.offset.top||0),left:t-l})};this.hide=function(){r.wmBox.fadeOut()};this.close=function(){r.wmBox.fadeOut(function(){e(this).remove()})};typeof q.callback==="function"&&q.callback.call(this)};b.prototype=new f();var h=function(l,o){var k=this,j,n,m;this._html=d(['<div class="wmBox invBox ${boxCls} fixed_box" id="${boxId}">','<div class="wmBox-content"></div>',"</div>"].join(""));j=e.extend({content:"",mask:true},l);j.callback=l?l.callback||o:undefined;this.wmBox=n=this.create(j,function(q,p){q.find(".wmBox-content").append(j.content)});if(c){m={zoom:1,width:n.outerWidth()};n.find(".wmBox-head").css(m);n.find(".wmBox-botton").css(m)}this.position=function(){k.wmBox.css({marginTop:-(n.outerHeight()/2)+"px",marginLeft:-(n.outerWidth()/2)+"px"})};this.show=function(){k.wmBox.show();k.mask.css("display","block");k.position()};this.hide=function(){k.wmBox.fadeOut();k.mask.fadeOut()};typeof j.callback==="function"&&j.callback.call(this);this.wmBox.attr("top",this.wmBox.css("top"));!i&&a();i&&c&&e(window).scroll()};h.prototype=new f();exports.alert=function(j,l){var k=new g(j,l);k.show();return k};exports.relyBox=function(j,l){var k=new b(j,l);k.show();return k};exports.invBox=function(j,l){var k=new h(j,l);k.show();return k}});