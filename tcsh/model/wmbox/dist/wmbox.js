define(function(require,exports,module){var j=require("http://s.tcsh.me/tcsh/model/domains/dist/domains.js");require("../css/style.css#");require("../../../view/public/wm_btn/css/style.css#");var e=require("http://s.tcsh.me/tcsh/model/lib/jquery/seajs-jquery-1.8.3.min.js"),d=require("http://s.tcsh.me/tcsh/model/lib/juicer/seajs-juicer-min.js");var c=e.browser.msie&&e.browser.version==="6.0";var i=false;var a=function(){if(c){i=true;var n=e(window),m=e("body"),k=m[0],l=n.height();n.on("scroll.fixed",function(){var p=e(this),o=Math.random()*99999;p.data("t",o);(function(q){setTimeout(function(){if(q==p.data("t")){var r=e("body > .fixed_box:visible");if(r.length){var s=k.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0;var t=l/2-r.outerHeight()/2;r.css("margin-top",0);r.animate({top:s+t})}}},500)})(o)})}};var f=function(){var m,l,k=this;this.create=function(q,r){var n=q._opacity||"0.5";var o='<div class="wmBox-mask"style="display:block; top: 0; bottom: 0; left: 0; right: 0; z-index: 1000; background-color: #000; filter: alpha(opacity='+n*100+"); opacity:"+n+"; position: fixed;  _position: absolute;zoom: 1;_height:"+e("body").height()+'"><iframe class="sdialog-mask-iframe" style="display: none; _display: block; width: 100%; height: 100%; filter: alpha(opacity=0); opacity: 0;" frameborder="0" src="javascript:\'\';"></iframe></div>';var p=this;var t=e("body");var s=e(".wmBox").length+(q.basezIndex||10001);p.zIndex=s;m=e(this._html.render(q));t.append(m);l=e(o);l.click(function(u){u.preventDefault();u.stopPropagation()});l.mousemove(function(u){u.preventDefault();u.stopPropagation()});m.css("z-index",s+1);l.css("z-index",s);p.mask=l;typeof r==="function"&&r(m,l);q.mask&&t.append(l);m.on("click",".sure,.close",function(u){p.close();u.preventDefault()});m.on("click",".hide",function(u){p.hide();u.preventDefault()});m.on("click",".sure",function(u){if(typeof q.sureCallBack==="function"){q.sureCallBack.call(p)}u.preventDefault()});m.on("click",".wm_btn_item",function(u){var w=e(this),v=w.attr("dataindex");if(q.btns&&typeof q.btns[v].callback==="function"){q.btns[v].callback.call(p,w)}u.preventDefault()});m.css({paddingBottom:m.find(".wmBox-botton").outerHeight()+10});m.on("click.stopPropagation",function(u){u.stopPropagation()});m.mousemove(function(u){u.stopPropagation()});return m};this.show=function(){};this.hide=function(){m.fadeOut();l.fadeOut()};this.close=function(n){m.fadeOut(function(){e(this).remove();typeof n==="function"&&n()});l.fadeOut(function(){e(this).remove()})};this.position=function(){};this.setCon=function(n){m.find(".wmBox-content").empty().append(n);return k};this.setIndex=function(n){}};var g=function(m,p){var l=this,k,o,n;this._html=d(['<div class="wmBox ${boxCls} fixed_box" id="${boxId}">','<div class="wmBox-head">','<h3 class="wmBox-title">${titleText}</h3>','<a class="close" href="javascript:void(0);">&times;</a>',"</div>",'<div class="wmBox-content"></div>','<div class="wmBox-botton">',"{@each btns as btnsitem,i}",'<a class="wm_btn_item ui_btn ${btnsitem.cls} ${btnsitem.res}" href="#" dataindex="${i}"><span class="ui_btn_txt">${btnsitem.text}</span></a>',"{@/each}","</div>","</div>"].join(""));k=e.extend({titleText:"系统提示",content:"",mask:true,btns:[{cls:"ui_btn_h23red6",res:"sure",text:"确定"}]},m);k.callback=m?m.callback||p:undefined;this.wmBox=o=this.create(k,function(r,q){r.find(".wmBox-content").append(k.content)});if(c){n={zoom:1,width:o.outerWidth()};o.find(".wmBox-head").css(n);o.find(".wmBox-botton").css(n)}this.position=function(){l.wmBox.css({marginTop:-(o.outerHeight()/2)+"px",marginLeft:-(o.outerWidth()/2)+"px"})};this.show=function(q){l.wmBox.show();l.mask.css("display","block");l.position();typeof q==="function"&&q()};this.setTitle=function(q){l.wmBox.find(".wmBox-title").empty().append(q)};this.close=function(q){l.wmBox.fadeOut(function(){e(this).remove();typeof q==="function"&&q()});l.mask.fadeOut(function(){e(this).remove()})};this.hide=function(){l.wmBox.fadeOut();l.mask.fadeOut()};this.setIndex=function(q){l.wmBox.css("z-index",q+1);l.mask.css("z-index",q)};typeof k.callback==="function"&&k.callback.call(this);this.wmBox.attr("top",this.wmBox.css("top"));!i&&a();i&&c&&e(window).scroll()};g.prototype=new f();var b=function(t,p){var s=this,r,q,o,n,l,m,k;if(!t.rely){throw"relyBox rely parameter is null or undefined"}this.rely=e(t.rely);l=e(window);m=l.scrollLeft();k=l.scrollTop();n=this.rely.offset();this._html=d(['<div class="wmBox wm_relyBox ${boxCls}" id="${boxId}">','<div class="wmBox-content"></div>','<div class="wmBox-botton">',"{@each btns as btnsitem,i}",'<a class="wm_btn_item ui_btn ${btnsitem.cls} ${btnsitem.res}" href="#" dataindex="${i}"><span class="ui_btn_txt">${btnsitem.text}</span></a>',"{@/each}","</div>","</div>"].join(""));this.show=function(u){s.position();q.show();typeof u==="function"&&u.call(s)};r=e.extend({content:"",mask:false,offset:{top:0,left:0},btns:[{cls:"ui_btn_h22red10",res:"sure",text:"确定"},{cls:"ui_btn_h22gray6",res:"close",text:"取消"}]},t);r.callback=t?t.callback||p:undefined;this.wmBox=q=this.create(r,function(v,u){v.find(".wmBox-content").append(r.content)});if(c){o={zoom:1,width:q.outerWidth()};q.find(".wmBox-botton").css(o)}this.position=function(){m=l.scrollLeft();k=l.scrollTop();n=this.rely.offset();var u=n.left-(r.offset.left||0);if(u+q.outerWidth()>e("body").outerWidth()){u=n.left-q.outerWidth()+s.rely.outerWidth()}q.css({marginTop:"0px",marginLeft:"0px",top:n.top+s.rely.outerHeight()+5+(r.offset.top||0),left:u-m})};this.hide=function(){s.wmBox.fadeOut()};this.close=function(u){s.wmBox.fadeOut(function(){e(this).remove();typeof u==="function"&&u()})};this.setIndex=function(u){s.wmBox.css("z-index",u+1);s.mask.css("z-index",u)};typeof r.callback==="function"&&r.callback.call(this)};b.prototype=new f();var h=function(m,p){var l=this,k,o,n;this._html=d(['<div class="wmBox invBox ${boxCls} fixed_box" id="${boxId}">','<div class="wmBox-content"></div>',"</div>"].join(""));k=e.extend({content:"",mask:true},m);k.callback=m?m.callback||p:undefined;this.wmBox=o=this.create(k,function(r,q){r.find(".wmBox-content").append(k.content)});if(c){n={zoom:1,width:o.outerWidth()};o.find(".wmBox-head").css(n);o.find(".wmBox-botton").css(n)}this.position=function(){l.wmBox.css({marginTop:-(o.outerHeight()/2)+"px",marginLeft:-(o.outerWidth()/2)+"px"})};this.show=function(q){l.wmBox.show();l.mask.css("display","block");l.position();typeof q==="function"&&q.call(l)};this.hide=function(){l.wmBox.fadeOut();l.mask.fadeOut()};this.setIndex=function(q){l.wmBox.css("z-index",q+1);l.mask.css("z-index",q)};typeof k.callback==="function"&&k.callback.call(this);this.wmBox.attr("top",this.wmBox.css("top"));!i&&a();i&&c&&e(window).scroll()};h.prototype=new f();exports.alert=function(k,m){var l=new g(k,m);l.show();return l};exports.relyBox=function(k,m){var l=new b(k,m);l.show();return l};exports.invBox=function(k,m){var l=new h(k,m);l.show();return l}});