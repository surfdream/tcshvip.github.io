define(function(require,exports,module){var b=require("http://s.tcsh.me/tcsh/model/lib/jquery/seajs-jquery-1.8.3.min.js");var a=function(g){var c=this;var d=b.extend({changeEle:".wmchangewhbox",paeentBox:".changeboxparent",changeBtnDownCallback:function(){},changeBtnUpCallback:function(){},changeBtnMousemoveCallback:function(){},changePX:function(){}},g);var e=function(){c.$changeBox.css("position")=="static"&&c.$changeBox.css("position","relative");c.$changeBtn=b('<a href="#" class="changebtn" style="cursor:se-resize;display: block; position: absolute; width: 5px; height: 5px; border: 1px solid #999; bottom: -4px; right: -4px; background: #fff; "></a>');c.$changeBox.append(c.$changeBtn);f()};var f=function(){var h=b("body");c.$changeBtn.on("mousedown",function(){c.stop=false;typeof d.changeBtnDownCallback==="function"&&d.changeBtnDownCallback.call(c)});h.on("mouseup",function(){c.stop=true;typeof d.changeBtnUpCallback==="function"&&d.changeBtnUpCallback.call(c)});h.on("mousemove.changewhbox",function(q){var p,m,r,k,s,j,u,l,o,i,t,n;if(c.stop){return}p=q.pageX,m=q.pageY;s=c.$changeBox.offset();r=c.$changeBox.outerWidth();k=c.$changeBox.outerHeight();if(c.$paeentBox.length){i=c.$paeentBox.offset();o={top:s.top-i.top,left:s.left-i.left}}if(typeof d.changePX==="function"){l=d.changePX.call({pageY:m,pageX:p,offsetY:s.top,offsetX:s.left,parentTop:o.top,parentLeft:o.left,width:c.$changeBox.width(),height:c.$changeBox.height(),outerWidth:r,outerHeight:k,$changeBox:c.$changeBox,$paeentBox:c.$paeentBox,$changeBtn:c.$changeBtn,stop:c.stop})}j=(l&&l.Width)||(p-s.left-r+c.$changeBox.width());u=(l&&l.Height)||(m-s.top-k+c.$changeBox.height());if(c.$paeentBox.length){i=c.$paeentBox.offset();t=c.$paeentBox.outerWidth();n=c.$paeentBox.outerHeight();if(j+o.left>t){j=t-o.left-2}if(u+o.top>n){u=n-o.top-2}}c.$changeBox.width(j);c.$changeBox.height(u);typeof d.changeBtnMousemoveCallback==="function"&&d.changeBtnMousemoveCallback.call({$changeBox:c.$changeBox,width:c.$changeBox.width(),height:c.$changeBox.height()})})};this.$changeBox=b(d.changeEle);this.$paeentBox=this.$changeBox.closest(d.paeentBox);this.$changeBtn;this.stop=true;e()};exports.create=function(c){return new a(c)}});