define(function(require,exports,module){var b=require("http://s.tcsh.me/tcsh/model/lib/jquery/seajs-jquery-1.8.3.min.js");var c=require("http://s.tcsh.me/tcsh/model/wmarea/dist/area_data.js");var a=function(j){var i,e,d,g,h;i=function(k){return k.constructor==b?k:b(k)};var f={parent:b("body"),provincesEle:"#selProvince_rent",provincesVal:"0",cityEle:"#selCity_rent",cityVal:"0",districtsEle:"#selDistricts_rent",districtsVal:"0",provincesDataSource:c.data_province,provincesDataSourceAjaxData:{},provincesDataSourceDataValCode:"",cityDataSource:c.data_city,cityDataSourceAjaxData:{},cityDataSourceDataValCode:"",districtsDataSource:c.data_districts,districtsDataSourceAjaxData:{},districtsDataSourceDataValCode:"",defaultItem:{val:0,txt:"请选择"}};f=b.extend(f,j);f.parent=i(f.parent);f.provincesEle=f.parent.find(f.provincesEle);f.cityEle=f.parent.find(f.cityEle);f.districtsEle=f.parent.find(f.districtsEle);e=function(s,q,r,k,o){var m,n=[],l;if(!q||(q.constructor!=Array&&q.constructor!=Object)){return}m=i(s);for(var p in q){if(q.hasOwnProperty(p)){if(!r||!k){n.push('<option value="'+p+'">'+q[p]+"</option>")}else{n.push('<option value="'+q[p][r]+'">'+q[p][k]+"</option>")}}}m.empty().append('<option value="'+f.defaultItem.val+'">'+f.defaultItem.txt+"</option>");m.append(n.join("")).css("zoom","1");l={$this:m};typeof o==="function"&&o.call(l)};cityEleInit=function(){var k=i(this),l=k.val();if(typeof f.cityDataSource==="string"){b.ajax({url:f.cityDataSource,cache:false,data:typeof f.cityDataSourceAjaxData=="function"?f.cityDataSourceAjaxData.call({$this:k,val:l}):f.cityDataSourceAjaxData,dataType:"json",success:function(m){e(f.cityEle,m,f.cityDataSourceDataValCode,f.cityDataSourceDataTxtCode,function(){f.districtsEle.empty().append('<option value="'+f.defaultItem.val+'">'+f.defaultItem.txt+"</option>")})}})}else{e(f.cityEle,f.cityDataSource[l],"value","name",function(){f.districtsEle.empty().append('<option value="'+f.defaultItem.val+'">'+f.defaultItem.txt+"</option>")})}};districtsEleInit=function(){var k=i(this),l=k.val();if(typeof f.districtsDataSource==="string"){b.ajax({url:f.cityDataSource,cache:false,data:typeof f.cityDataSourceAjaxData=="function"?f.cityDataSourceAjaxData.call({$this:k,val:l}):f.cityDataSourceAjaxData,dataType:"json",success:function(m){e(f.cityEle,m,f.cityDataSourceDataValCode,f.cityDataSourceDataTxtCode)}})}else{e(f.districtsEle,f.districtsDataSource[l],"value","name",function(){!f.districtsDataSource[l].length&&f.districtsEle.find("option").attr("value",l)})}};g=function(){if(typeof f.provincesDataSource==="string"){b.ajax({url:f.provincesDataSource,cache:false,data:typeof f.provincesDataSourceAjaxData=="function"?f.provincesDataSourceAjaxData():f.provincesDataSourceAjaxData,dataType:"json",success:function(k){e(f.provincesEle,k,f.provincesDataSourceDataValCode,f.provincesDataSourceDataTxtCode)}})}else{e(f.provincesEle,f.provincesDataSource,f.provincesDataSourceDataValCode,f.provincesDataSourceDataTxtCode)}};f.provincesEle.length&&f.provincesEle.change(cityEleInit);f.cityEle.length&&f.cityEle.change(districtsEleInit);g();e(f.cityEle,[]);e(f.districtsEle,[])};return a});