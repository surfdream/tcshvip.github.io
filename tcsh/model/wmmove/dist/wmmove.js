define(function(require,exports,module){var a=require("http://s.tcsh.me/tcsh/model/lib/jquery/seajs-jquery-1.8.3.min.js");var b=function(h){var c=this;var d=a.extend({moveEle:".wmmove",event:"mousedown",parentEle:".wmmoveparent",moveOffset:{top:0,left:0},mousemoveCallback:function(){}},h);var f=false;var e=function(){var i,j;c.$moveBox.css({position:"absolute"});i=c.$moveBox.outerWidth();j=c.$moveBox.outerHeight();g()};var g=function(){var i=a("body");if(d.event==="mousedown"){c.$moveBox.on("mousedown.wmmove",function(l){var k=a(this),j;c.isDown=true;j=k.offset();c.mouseParentX=l.pageX-j.left;c.mouseParentY=l.pageY-j.top});i.on("mouseup.wmmove",function(){c.isDown=false})}else{c.isDown=true;c.mouseParentX=c.$moveBox.outerWidth()/2;c.mouseParentY=c.$moveBox.outerHeight()/2}i.on("mousemove.wmmove",function(p){if(!c.isDown){return}if(c.stop){return}var q=c.$moveBox;var o=p.pageX,m=p.pageY,t,u,j,s,n,r,k,l;t=m-c.mouseParentY;u=o-c.mouseParentX;if(c.$moveParentBox.length){j=c.$moveParentBox.offset();s=c.$moveParentBox.outerWidth();n=c.$moveParentBox.outerHeight();r=q.outerWidth();k=q.outerHeight();t=t<j.top?j.top:t;u=u<j.left?j.left:u;t=t+k>j.top+n?j.top+n-k:t;u=u+r>j.left+s?j.left+s-r:u}t=t+(d.moveOffset.top||0);u=u+(d.moveOffset.left||0);q.css({top:t,left:u});typeof d.mousemoveCallback==="function"&&d.mousemoveCallback.call(c,{pageX:o,pageY:m})})};this.$moveBox=a(d.moveEle);this.$moveParentBox=a(d.parentEle);this.$movemask=undefined;this.isDown=false;this.mouseParentX=0;this.mouseParentY=0;this.stop=false;e()};exports.create=function(c){return new b(c)}});