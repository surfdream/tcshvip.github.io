define(function(require,exports,module){var g=require("domains");var a=require("jquery"),b=require("wmbox"),f=require("wmupload"),d=require("wmshowartwork");page=require("wmpage");require("core-css");require("theme-css");require("datepicker-css");require("jquery.ui.core")(a);require("jquery.ui.widget")(a);require("jquery.ui.datepicker")(a);require("datepicker-zh-CN")(a);var e=function(){var h=a("#page");if(global_setting&&global_setting.totalcount){var i=page.Create({url:global_setting.pageURL,element:".order_page",size:global_setting.pageSize,index:global_setting.pageIndex,sum:global_setting.totalcount,pagekey:global_setting.pageKey,front:true})}c()};var c=function(){var h=a("#page");h.find(".photo_infor a").hover(function(){var i=a(this);i.find(".big_photo").addClass("big_photo_hover")},function(){var i=a(this);i.find(".big_photo").removeClass("big_photo_hover")});h.find(".photo_infor").on("click","a",function(){var j=a(this),i=j.data("showartwork");if(!i){i=d.create(j.find("img").attr("src"));j.data("showartwork",i)}i.show();return false});h.on("click",".pass",function(){var i=a(this);_status=i.attr("data_status"),_id=h.find(".account_infor").attr("data_id");a.ajax({url:g.api2+"/user/checkcard.json",type:"get",dataType:"jsonp",data:{status:_status,id:_id},success:function(){alert("审核通过！");window.location.reload()},error:function(){alert("系统繁忙，请稍后再试！")}});return false});h.on("click",".nopass",function(){var l=a(this),j=l.data("thisBox"),k=l.attr("data_status"),i=h.find(".account_infor").attr("data_id");if(!j){j=b.invBox({boxCls:"nopass_box",content:'<div class="nopass_reason"><h3>审核未通过原因</h3><textarea name="" id="" cols="30" rows="10" class="reason_con"></textarea><p><a href="#" class="sure_btn">确定</a><a href="#" class="close">取消</a></p><a href="#" class="wm_ico fork7 close"></a></div>',callback:function(){var m=this;this.close=this.hide;this.wmBox.find(".sure_btn").on("click",function(){var o=a(this),n=encodeURIComponent(o.closest(".nopass_reason").find(".reason_con").val());if(n){a.ajax({url:g.api2+"/user/checkcard.json",type:"get",dataType:"jsonp",data:{reason:n,status:k,id:i},success:function(p){if(p.success){m.close();window.location.reload()}else{alert(p.erroe||"提交失败！")}},error:function(){alert("系统繁忙，请稍后再试！")}})}else{alert("请填写未通过原因！")}return false})}});l.data("thisBox",j)}j.show();return false});h.find(".time_date").datepicker({onClose:function(i,j){if(!(/\d{4}-\d{2}-\d{2}/.test(i))){j.input.val("")}}})};e()});