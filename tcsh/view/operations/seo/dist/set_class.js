define(function(require,exports,module){var k=require("domains");var e=require("jquery"),d=require("juicer");var h={};var f=e("#page"),j=f.find(".set_class_main");var a=function(){var o=e(".topclass");var n=e(".subclass");var m=e("#listBox");o.empty().append('<option value="0">顶级</option>');for(var l in h){o.append('<option value="'+l+'">'+h[l].name+"</option>")}o.change(function(){var r=e(this),s=r.val();n.empty().append('<option value="0">无</option>');if(s-0){var p=h[s].itemList;if(p){for(var q in p){n.append('<option value="'+q+'">'+p[q].name+"</option>")}j.find(".class_item").remove();c(p)}}else{j.find(".class_item").remove();c()}});n.change(function(){var q=e(this),r=q.val();if(r-0){var p=h[r.substring(0,2)+"0000"].itemList[r].itemList;j.find(".class_item").remove();c(p)}else{o.change()}})},b=function(){e.ajax({url:k.api+"/category",type:"get",dataType:"jsonp",success:function(l){h=l;a();c()},error:function(){alert("getSubordinateList  Error !")}})},c=function(o){var n=o||h;var l=[];_html=d(e("#class_item_model").html());for(var m in n){l.push(_html.render(e.extend({id:m,name:n[m].name},global_setting.keywords[m])))}j.append(l.join(""))};var i=function(){b();g()};var g=function(){};i()});